<?xml version="1.0" encoding="UTF-8"?>
<beans
       xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:int="http://www.springframework.org/schema/integration"
       xmlns:int-http="http://www.springframework.org/schema/integration/http"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/integration
       http://www.springframework.org/schema/integration/spring-integration.xsd
       http://www.springframework.org/schema/integration/http
       http://www.springframework.org/schema/integration/http/spring-integration-http.xsd">


    <int:annotation-config/>

    <int:channel id="requestChannel"/>
    <int:channel id="replyChannel"/>
    <int-http:inbound-gateway
            supported-methods="GET"
            request-channel="requestChannel"
            reply-channel="replyChannel"
            path="/services/{method}/{var1}"
            mapped-response-headers="Return-Status, Return-Status-Msg, HTTP_RESPONSE_HEADERS"
            reply-timeout="50000"
            payload-expression="#pathVariables">
        <int-http:request-mapping produces="application/json"/>
    </int-http:inbound-gateway>

    <int-http:inbound-gateway
            supported-methods="GET"
            request-channel="requestChannel"
            reply-channel="replyChannel"
            path="/services/{method}/{var1}/{var2}"
            mapped-response-headers="Return-Status, Return-Status-Msg, HTTP_RESPONSE_HEADERS"
            reply-timeout="50000"
            payload-expression="#pathVariables">
    </int-http:inbound-gateway>

    <int-http:inbound-gateway
            supported-methods="GET"
            request-channel="requestChannel"
            reply-channel="replyChannel"
            path="/services/{method}/{var1}/{var2}/{var3}"
            mapped-response-headers="Return-Status, Return-Status-Msg, HTTP_RESPONSE_HEADERS"
            reply-timeout="50000"
            payload-expression="#pathVariables">
    </int-http:inbound-gateway>

    <int-http:inbound-gateway
            supported-methods="GET"
            request-channel="requestChannel"
            reply-channel="replyChannel"
            path="/services/{method}/{var1}/{var2}/{var3}/{var4}"
            mapped-response-headers="Return-Status, Return-Status-Msg, HTTP_RESPONSE_HEADERS"
            reply-timeout="50000"
            payload-expression="#pathVariables">
    </int-http:inbound-gateway>

    <int:service-activator input-channel="requestChannel"
                       output-channel="replyChannel"
                       ref="channelHandler"
                       method="handleConsumerRequest"
                       requires-reply="true"
                       send-timeout="60000"/>


    <int:channel id="catalogRequestChannel"/>
    <int:channel id="catalogReplyChannel"/>
    <int-http:inbound-gateway
            request-channel="catalogRequestChannel"
            reply-channel="catalogReplyChannel"
            supported-methods="GET"
            path="services/catalogs/{var}"
            payload-expression="#pathVariables.var">
    </int-http:inbound-gateway>
    <int:service-activator input-channel="catalogRequestChannel"
                       output-channel="catalogReplyChannel"
                       ref="channelHandler"
                       method="getCatalog"/>



    <!--<int:publish-subscribe-channel id="publishSubscribeChannel"/>-->
<!--
    <int:channel id="inputChannel"/>

    <int:inbound-channel-adapter channel="in" expression="''">
        <int:poller fixed-rate="10000"/>
    </int:inbound-channel-adapter>

    <int:service-activator input-channel="out" ref="channelHandler" method="printMessage" requires-reply="false"/>

    <int-http:inbound-gateway
            path="/checkOutbound"
            request-channel="inboundRequestChannel"
            reply-channel="inboundReplyChannel"
            supported-methods="GET"/>
    <int:service-activator
            input-channel="inboundRequestChannel"
            output-channel="inboundReplyChannel"
            ref="channelHandler"
            method="printMessageOut"/>

    <int:channel id="inboundRequestChannel"/>
    <int:channel id="inboundReplyChannel"/>

    <int:channel id="out"/>
    <int:channel id="in"/>
    <int-http:outbound-gateway
            request-channel="in"
            reply-channel="out"
            http-method="GET"
            expected-response-type="java.lang.String"
            url="http://10.51.1.29:9091/ws/set_passport_data?token=fc31242d9c4d4a12fc516d1e806b7abb&amp;pin=01234567891234&amp;name=Петя&amp;surname=Петров&amp;patronymic=Петрович">
    </int-http:outbound-gateway>
-->
            <!--url="http://localhost:8080/integration/checkOutbound">-->
        <!--<int:poller fixed-rate="2000" default="true"/>-->













</beans>